# CLI Reference

## üîß Command Overview

The Grid Trading Bot provides two main executables for different workflows:

- **`backtest`** - Research and strategy development
- **`trade`** - Live trading execution

## üìä Backtest Commands

### Demo Backtest
```bash
cargo run --bin backtest demo
# or via Makefile
make demo-backtest
```

**Description:** Runs a quick demonstration backtest on XRPGBP pair

**Output:**
- Performance metrics (return, Sharpe ratio, drawdown)
- Trade statistics (total trades, win rate)
- Markov analysis confidence
- Generated strategy file

### List Available Pairs
```bash
cargo run --bin backtest list
# or via Makefile  
make list-pairs
```

**Description:** Fetches and displays all available GBP trading pairs from Kraken

**Output:**
```
Available GBP trading pairs:
- ADAGBP (Cardano)
- BTCGBP (Bitcoin)
- ETHGBP (Ethereum)
- XRPGBP (Ripple)
...
```

### Custom Pair Backtest
```bash
cargo run --bin backtest demo --pair BTCGBP
```

**Parameters:**
- `--pair <SYMBOL>` - Trading pair to backtest (default: XRPGBP)

## üöÄ Trade Commands

### Demo Trading
```bash
cargo run --bin trade demo
# or via Makefile
make demo-trade
```

**Description:** Simulates live trading using generated strategy files

**Requirements:** Strategy file must exist (generated by backtest)

**Output:**
- Real-time price simulation
- Grid level monitoring
- Signal generation and execution
- Portfolio tracking

### List Strategies
```bash
cargo run --bin trade list
```

**Description:** Shows all available strategy files

**Output:**
```
Available strategies:
- strategies/xrpgbp_strategy.json (generated 2025-09-30)
- strategies/btcgbp_strategy.json (generated 2025-09-29)
```

### Custom Strategy Trading
```bash
cargo run --bin trade demo --pair BTCGBP
```

**Parameters:**
- `--pair <SYMBOL>` - Load strategy for specific pair

## üõ†Ô∏è Development Commands

### Build Project
```bash
make build
# or
cargo build
```

### Run Tests
```bash
make test           # All tests
make test-lib       # Library tests only
make test-bin       # Binary tests only
make test-e2e       # End-to-end tests
```

### Code Quality
```bash
make fmt            # Format code
make clippy         # Run linter
make check          # Check without building
make dev-check      # Format + lint + test
```

### Development Mode
```bash
make backtest-dev   # Backtest with debug logs
make trade-dev      # Trading with debug logs

# Or set environment manually
RUST_LOG=debug cargo run --bin backtest demo
```

## üìù Command Examples

### Complete Workflow Example

```bash
# 1. Build the project
make build

# 2. Run backtest to generate strategy
make demo-backtest
# Output: strategies/xrpgbp_strategy.json created

# 3. Start live trading simulation
make demo-trade
# Uses the generated strategy file

# 4. Monitor with detailed logs
RUST_LOG=debug make demo-trade
```

### Multi-Pair Strategy Development

```bash
# Generate strategies for multiple pairs
cargo run --bin backtest demo --pair BTCGBP
cargo run --bin backtest demo --pair ETHGBP
cargo run --bin backtest demo --pair ADAGBP

# List all generated strategies
cargo run --bin trade list

# Test each strategy
cargo run --bin trade demo --pair BTCGBP
cargo run --bin trade demo --pair ETHGBP
```

## ‚öôÔ∏è Configuration Options

### Environment Variables

**Logging Level:**
```bash
export RUST_LOG=debug    # Verbose logging
export RUST_LOG=info     # Standard logging (default)
export RUST_LOG=warn     # Warnings only
export RUST_LOG=error    # Errors only
```

**Custom Configuration:**
```bash
export GRID_LEVELS=7         # Override default grid levels
export GRID_SPACING=0.005    # Override default spacing
export MIN_CONFIDENCE=60     # Minimum Markov confidence
```

### Strategy File Locations

**Default Path:** `strategies/`
**File Format:** `{pair}_strategy.json`
**Examples:**
- `strategies/xrpgbp_strategy.json`
- `strategies/btcgbp_strategy.json`

## üîç Debugging Commands

### Verbose Output
```bash
# Maximum verbosity
RUST_LOG=trace cargo run --bin backtest demo

# Component-specific logging
RUST_LOG=grid_trading_bot::backtesting=debug cargo run --bin backtest demo
```

### Performance Profiling
```bash
# Release build for performance testing
cargo build --release
cargo run --release --bin backtest demo

# Time the execution
time cargo run --release --bin backtest demo
```

### Memory Usage
```bash
# Monitor memory usage during backtest
/usr/bin/time -v cargo run --bin backtest demo
```

## üö® Error Handling

### Common Issues

**Missing Strategy File:**
```
Error: Strategy file not found: strategies/btcgbp_strategy.json
Solution: Run backtest first to generate strategy
```

**Network Connection Issues:**
```
Error: Failed to connect to Kraken API
Solution: Check internet connection and try again
```

**Invalid Trading Pair:**
```
Error: Trading pair INVALID not supported
Solution: Use 'backtest list' to see available pairs
```

### Recovery Commands
```bash
# Clean build artifacts
make clean

# Rebuild from scratch
make clean && make build

# Reset strategy files
rm -rf strategies/
make demo-backtest  # Regenerate
```

This CLI reference provides comprehensive guidance for using all available commands and options in the Grid Trading Bot system.