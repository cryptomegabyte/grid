# Configuration

## üß† Optimized Strategy Files

The autonomous optimization system generates enhanced strategy files with discovered optimal parameters.

### Optimized File Structure

**Location:** `optimized_strategies/{pair}_optimized.json`

**Example:** `optimized_strategies/gbpusd_optimized.json`
```json
{
  "trading_pair": "GBPUSD",
  "grid_levels": 12,
  "grid_spacing": 0.021,
  "timeframe": "60m",
  "grid_strategy": "Fibonacci",
  "risk_model": "Kelly",
  "expected_return": 2.45,
  "total_trades": 156,
  "win_rate": 68.5,
  "sharpe_ratio": 1.84,
  "max_drawdown": 3.2,
  "total_fees": 24.80,
  "markov_confidence": 72.3,
  "optimization_score": 0.856,
  "generated_at": "2025-09-30T16:08:14Z",
  "optimization_params": {
    "strategy": "genetic-algorithm",
    "iterations": 500,
    "population_size": 50,
    "generations": 25
  }
}
```

## üìÅ Traditional Strategy Files

Strategy files are JSON configurations generated by the backtesting system and consumed by the live trading engine.

### File Structure

**Location:** `strategies/{pair}_strategy.json`

**Example:** `strategies/xrpgbp_strategy.json`
```json
{
  "trading_pair": "XRPGBP",
  "grid_levels": 5,
  "grid_spacing": 0.01,
  "base_price": 2.1176,
  "expected_return": -0.09,
  "total_trades": 18,
  "win_rate": 0.0,
  "sharpe_ratio": -18.19,
  "max_drawdown": 0.09,
  "total_fees": 9.80,
  "markov_confidence": 54.6,
  "generated_at": "2025-09-30T16:08:14Z",
  "backtest_period": {
    "start": "2025-08-31T00:00:00Z",
    "end": "2025-09-30T00:00:00Z"
  }
}
```

### Configuration Parameters

**Trading Parameters:**
- `trading_pair` - Currency pair (e.g., "XRPGBP")
- `grid_levels` - Number of buy/sell levels (default: 5)
- `grid_spacing` - Price distance between levels (default: 0.01)
- `base_price` - Reference price for grid calculation

**Performance Metrics:**
- `expected_return` - Backtested return percentage
- `total_trades` - Number of completed trades
- `win_rate` - Percentage of profitable trades
- `sharpe_ratio` - Risk-adjusted return metric
- `max_drawdown` - Maximum loss percentage

**Risk Assessment:**
- `total_fees` - Trading costs in base currency
- `markov_confidence` - Market state prediction confidence
- `generated_at` - Strategy creation timestamp
- `backtest_period` - Historical data range used

## ‚öôÔ∏è System Configuration

### Environment Variables

**Logging Configuration:**
```bash
# Set logging level
export RUST_LOG=info          # Default level
export RUST_LOG=debug         # Detailed debugging
export RUST_LOG=trace         # Maximum verbosity

# Component-specific logging
export RUST_LOG=grid_trading_bot::backtesting=debug
```

**Trading Parameters:**
```bash
# Override default grid parameters
export GRID_LEVELS=7          # More grid levels
export GRID_SPACING=0.005     # Tighter spacing
export MIN_CONFIDENCE=60      # Higher confidence threshold
```

**API Configuration:**
```bash
# Kraken API settings
export KRAKEN_WS_URL="wss://ws.kraken.com"
export KRAKEN_API_URL="https://api.kraken.com"
export API_TIMEOUT=30         # Request timeout in seconds
```

### Compile-Time Configuration

**Grid Trading Parameters:**
```rust
// In src/core/grid_trader.rs
const DEFAULT_GRID_LEVELS: usize = 5;
const DEFAULT_GRID_SPACING: f64 = 0.01;
const MIN_PRICE_CHANGE: f64 = 0.001;
```

**Risk Management:**
```rust
// In src/backtesting/engine.rs
const MAX_POSITION_SIZE: f64 = 0.25;    // 25% of portfolio
const TRADING_FEE_RATE: f64 = 0.0026;   // 0.26% taker fee
const SLIPPAGE_RATE: f64 = 0.001;       // 0.1% slippage
```

**Performance Settings:**
```rust
// In src/backtesting/vectorized.rs
const BATCH_SIZE: usize = 1000;         // Vectorization batch size
const PARALLEL_CHUNKS: usize = 4;       // Parallel processing chunks
```

## üéØ Strategy Optimization

### Parameter Tuning

**Grid Levels:**
- **Low (3-5):** Less frequent signals, larger price movements
- **Medium (5-10):** Balanced approach, moderate signal frequency
- **High (10+):** More signals, smaller profits per trade

**Grid Spacing:**
- **Tight (0.001-0.005):** High-frequency trading, more fees
- **Medium (0.005-0.02):** Standard volatility capture
- **Wide (0.02+):** Lower frequency, bigger moves required

### Market-Specific Settings

**High Volatility Pairs (BTC, ETH):**
```json
{
  "grid_levels": 3,
  "grid_spacing": 0.05,
  "min_confidence": 70
}
```

**Low Volatility Pairs (Stablecoins):**
```json
{
  "grid_levels": 10,
  "grid_spacing": 0.001,
  "min_confidence": 50
}
```

**Medium Volatility Pairs (XRP, ADA):**
```json
{
  "grid_levels": 5,
  "grid_spacing": 0.01,
  "min_confidence": 60
}
```

## üîß Development Configuration

### Cargo Configuration

**Optimization Profiles:**
```toml
# In Cargo.toml
[profile.dev]
debug = true
opt-level = 0

[profile.release]
debug = false
opt-level = 3
lto = true
```

**Feature Flags:**
```toml
[features]
default = ["real-time"]
real-time = ["tokio-tungstenite"]
backtesting = ["ndarray", "polars"]
analytics = ["plotters", "statrs"]
```

### Testing Configuration

**Test Data Location:**
```
tests/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ xrpgbp_sample.json
‚îÇ   ‚îú‚îÄ‚îÄ btcgbp_sample.json
‚îÇ   ‚îî‚îÄ‚îÄ market_states.json
‚îî‚îÄ‚îÄ fixtures/
    ‚îú‚îÄ‚îÄ strategies/
    ‚îî‚îÄ‚îÄ expected_results/
```

**Mock Configuration:**
```rust
// In tests/
const MOCK_API_DELAY: u64 = 100;        // 100ms simulated latency
const MOCK_DATA_POINTS: usize = 1000;   // Sample size
const MOCK_VOLATILITY: f64 = 0.02;      // 2% standard deviation
```

## üìä Monitoring Configuration

### Performance Metrics

**Tracking Intervals:**
```rust
const METRIC_INTERVAL: Duration = Duration::from_secs(60);    // 1 minute
const REPORT_INTERVAL: Duration = Duration::from_secs(3600);  // 1 hour
const BACKUP_INTERVAL: Duration = Duration::from_secs(86400); // 1 day
```

**Alert Thresholds:**
```rust
const MAX_DRAWDOWN_ALERT: f64 = 0.05;     // 5% loss alert
const MIN_CONFIDENCE_ALERT: f64 = 30.0;   // Low confidence warning
const CONNECTION_TIMEOUT: u64 = 30;       // Connection loss timeout
```

This configuration system provides flexible control over all aspects of the grid trading system while maintaining sensible defaults for production use.